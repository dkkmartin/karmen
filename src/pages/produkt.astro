---
import StartLayout from '../layouts/StartLayout.astro';
import { Image, Picture } from '@astrojs/image/components';
import plante1 from '../assets/plante_1.png';
import plante2 from '../assets/plante_2.png';
import plante3 from '../assets/plante_3.png';
import fscLogo from '../assets/forest_stewardship_council.png';
import Button from '../components/Button.astro';
---

<script>
  const sliders = document.querySelectorAll('.slide');
  const dots = Array.from(document.querySelectorAll('.dot'));
  const arrowLeft = document.querySelector('.fa-arrow-left');
  const arrowRight = document.querySelector('.fa-arrow-right');
  let index = 1;

  arrowLeft.addEventListener('click', () => {
    // Fjerne class active på den viste slider
    sliders[index].classList.remove('slide--active');
    // Fjerne class active på den viste dot
    dots[index].classList.remove('dot--active');
    // Index decrement
    index--;
    // Hvis index er mindre end 0
    if (index < 0) {
      // Index giver længden af variable sliders - 1
      // Minus 1 er fordi vi vil have index nummeret og ikke længden da længden af nodelisten er 3
      index = sliders.length - 1;
    }
    // Tilføjer class active på sliders[index]
    sliders[index].classList.add('slide--active');
    // Tilføjer class active på dots[index]
    dots[index].classList.add('dot--active');
  });

  arrowRight.addEventListener('click', () => {
    // Fjerne class active på den viste slider
    sliders[index].classList.remove('slide--active');
    // Fjerne class active på den viste dot
    dots[index].classList.remove('dot--active');
    // Index increment
    index++;
    // Hvis index er større eller ligmed længden af sliders
    if (index >= sliders.length) {
      // Index giver 0
      index = 0;
    }
    // Tilføjer class active på sliders[index]
    sliders[index].classList.add('slide--active');
    // Tilføjer class active på dots[index]
    dots[index].classList.add('dot--active');
  });

  dots.forEach((dot) => {
    dot.addEventListener('click', () => {
      // Gemmer det clicked index nummer i variablen clickedIndex
      const clickedIndex = dots.indexOf(dot);
      // Fjerne class active på den viste dot
      dots[index].classList.remove('dot--active');
      // Fjerne class active på den viste slider
      sliders[index].classList.remove('slide--active');
      // index giver clickedIndex
      index = clickedIndex;
      // Tilføjer class active på dots[index]
      dots[index].classList.add('dot--active');
      // Tilføjer class active på sliders[index]
      sliders[index].classList.add('slide--active');
    });
  });
</script>

<StartLayout>
  <div class="padding--120px">
    <section class="section__product">
      <div class="slider__con">
        <div class="image__arrows__con">
          <i class="fa-solid fa-arrow-left"></i>
          <div class="slide slide__1">
            <Image
              src={plante1}
              format={'webp'}
              alt="Karmen sukkulent plante"
              width={350}
              height={350}
            />
          </div>
          <div class="slide slide__2 slide--active">
            <Image
              src={plante2}
              format={'webp'}
              alt="Karmen sukkulent plante"
              width={350}
              height={350}
            />
          </div>
          <div class="slide slide__3">
            <Image
              src={plante3}
              format={'webp'}
              alt="Karmen sukkulent plante"
              width={263.2}
              height={350}
            />
          </div>
          <i class="fa-solid fa-arrow-right"></i>
        </div>
        <div class="dots">
          <div class="dot"></div>
          <div class="dot dot--active"></div>
          <div class="dot"></div>
        </div>
      </div>
      <article>
        <div class="article__text__con">
          <h1>Sukkulent</h1>
          <p>
            Det er fantastisk med grønne planter, der både er yndige og nemme at holde - og det er
            lige præcis tilfældet med sukkulenter. Den hårdføre plante kommer i tusindvis af
            forskellige sorter, hvoraf de mest almindelige slags, som rosetblomst, stenurt,
            paradistræ, husløg og diverse kaktus, fortsat dukker op i flere og flere vindueskarme
            herhjemme. Sukkulenten er nemlig ideel som stueplante, fordi den stortrives i den tørre,
            varme luft i vores bolig.
          </p>
          <Image src={fscLogo} format={'webp'} width={70} height={84} alt="FSC Logo" />
        </div>
        <Button title={'Læg i kurven'} />
      </article>
    </section>
    <section class="section__fairtrade"></section>
  </div>
</StartLayout>

<style>
  .slide__1,
  .slide__2,
  .slide__3 {
    display: none;
  }

  .slide--active {
    display: block;
  }

  .fa-solid {
    font-size: 2em;
    color: var(--secondary-font-blue);
    cursor: pointer;
  }

  .section__product {
    display: flex;
    justify-content: center;
    gap: 2em;
    padding-bottom: 10em;
  }

  article {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2em;
    height: 565px;
    width: 570px;
    padding: 4.3em;
    background: #f5f7f9;
    box-shadow: 0px 20px 40px rgba(13, 18, 39, 0.3);
    border-radius: 30px;
  }

  .slider__con {
    background-color: var(--primary-bg-color-pink);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 570px;
  }

  .article__text__con {
    line-height: 19.2px;
  }

  .image__arrows__con {
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;
    align-items: center;
    justify-items: center;
    padding-bottom: 1.7em;
  }

  .dots {
    display: flex;
    gap: 1.5em;
    margin-bottom: -1.7em;
  }

  .dot {
    height: 15px;
    width: 15px;
    border: 1px solid var(--secondary-font-blue);
    border-radius: 50px;
    cursor: pointer;
  }

  .dot--active {
    background-color: var(--secondary-font-blue);
  }

  h1 {
    font-size: 48px;
    font-weight: 400;
  }

  img {
    max-width: 100%;
    height: auto;
  }
</style>
